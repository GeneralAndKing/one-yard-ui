<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端 | 智能制造协同平台</title>
    <meta name="description" content="文档说明">
    <link rel="apple-touch-icon" href="/one-yard-ui/apple-touch-icon.png">
  <link rel="icon" href="/one-yard-ui/favicon-32x32.png">
  <link rel="manifest" href="/one-yard-ui/manifest.json">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/one-yard-ui/assets/css/0.styles.858f56bf.css" as="style"><link rel="preload" href="/one-yard-ui/assets/js/app.3393022b.js" as="script"><link rel="preload" href="/one-yard-ui/assets/js/2.04738c42.js" as="script"><link rel="preload" href="/one-yard-ui/assets/js/14.44ce8ad2.js" as="script"><link rel="preload" href="/one-yard-ui/assets/js/3.1b52fbe7.js" as="script"><link rel="prefetch" href="/one-yard-ui/assets/js/10.5f0e03c2.js"><link rel="prefetch" href="/one-yard-ui/assets/js/11.eacf953d.js"><link rel="prefetch" href="/one-yard-ui/assets/js/12.bedea048.js"><link rel="prefetch" href="/one-yard-ui/assets/js/13.0aa78ebe.js"><link rel="prefetch" href="/one-yard-ui/assets/js/15.db0d303b.js"><link rel="prefetch" href="/one-yard-ui/assets/js/16.0b53dac7.js"><link rel="prefetch" href="/one-yard-ui/assets/js/17.2afb900e.js"><link rel="prefetch" href="/one-yard-ui/assets/js/18.9ddb41a6.js"><link rel="prefetch" href="/one-yard-ui/assets/js/19.66d23c63.js"><link rel="prefetch" href="/one-yard-ui/assets/js/20.4eea7b7b.js"><link rel="prefetch" href="/one-yard-ui/assets/js/21.093b88ea.js"><link rel="prefetch" href="/one-yard-ui/assets/js/22.644f3eba.js"><link rel="prefetch" href="/one-yard-ui/assets/js/4.139c2291.js"><link rel="prefetch" href="/one-yard-ui/assets/js/5.faf28de6.js"><link rel="prefetch" href="/one-yard-ui/assets/js/6.85ee2228.js"><link rel="prefetch" href="/one-yard-ui/assets/js/7.d0cd05bd.js"><link rel="prefetch" href="/one-yard-ui/assets/js/8.a2a5c451.js"><link rel="prefetch" href="/one-yard-ui/assets/js/9.d656f4dc.js">
    <link rel="stylesheet" href="/one-yard-ui/assets/css/0.styles.858f56bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/one-yard-ui/" class="home-link router-link-active"><!----> <span class="site-name">智能制造协同平台</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/one-yard-ui/" class="nav-link">主页</a></div><div class="nav-item"><a href="/one-yard-ui/demand/" class="nav-link">操作手册</a></div><div class="nav-item"><a href="/one-yard-ui/architecture/" class="nav-link router-link-active">技术架构</a></div> <a href="https://github.com/GeneralAndKing/one-yard-ui" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/one-yard-ui/" class="nav-link">主页</a></div><div class="nav-item"><a href="/one-yard-ui/demand/" class="nav-link">操作手册</a></div><div class="nav-item"><a href="/one-yard-ui/architecture/" class="nav-link router-link-active">技术架构</a></div> <a href="https://github.com/GeneralAndKing/one-yard-ui" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/one-yard-ui/architecture/" class="sidebar-link">概览</a></li><li><a href="/one-yard-ui/architecture/maintain.html" class="sidebar-link">运维</a></li><li><a href="/one-yard-ui/architecture/back.html" class="sidebar-link">后端</a></li><li><a href="/one-yard-ui/architecture/web.html" class="active sidebar-link">前端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#设计" class="sidebar-link">设计</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#ui" class="sidebar-link">UI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#兼容性" class="sidebar-link">兼容性</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#模板引擎与预处理语言" class="sidebar-link">模板引擎与预处理语言</a></li></ul></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#js" class="sidebar-link">Js</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#封装" class="sidebar-link">封装</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#页面骨架" class="sidebar-link">页面骨架</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#鉴权" class="sidebar-link">鉴权</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/web.html#移动端" class="sidebar-link">移动端</a></li></ul></li><li><a href="/one-yard-ui/architecture/summary.html" class="sidebar-link">总结</a></li><li><a href="/one-yard-ui/architecture/other.html" class="sidebar-link">附录：接口设计表格</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="设计"><a href="#设计" class="header-anchor">#</a> 设计</h2> <p><img src="https://img.shields.io/github/license/GeneralAndKing/one-yard-ui" alt="GitHub"> <img src="https://img.shields.io/badge/yarn-1.19.1-blue" alt="yarn"> <img src="https://img.shields.io/badge/vue-2.6.10-success" alt="vue"> <img src="https://img.shields.io/badge/vuetify-2.1.9-yellow" alt="vuetify"></p> <p>随着 <code>Web</code> 的不断发展，现在前端的时代已经不是当初的前端了，不再是 <code>Bootstrap</code>、<code>JQuery</code> 一出万人空巷了。前端工程化和组件化已经成为时代趋势，他们提高前端开发效率的同时，也大大他高了前端代码的可读性、安全性，拥有了一套完整的前端生态。目前流行的三大前端框架：</p> <ul><li>React</li> <li>Angular</li> <li>Vue</li></ul> <p>三者之中，我们选择了 <code>Vue</code> 作为前端核心框架，一方面我们都是后端开发人员，现在的前端水平大大谈不上全栈的水平，而 <code>Vue</code> 作为三大框架中最容易上手的一个，我们开发起来相对也会轻松很多。</p> <p>前端是我们的短板，所以我们预留了很多时间给前端，但还是时间紧迫，紧赶慢赶。</p> <p>我们前端主要依赖如下：</p> <p><img src="http://image.japoul.cn/docs/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20191120214407.png" alt="dep"></p> <h2 id="ui"><a href="#ui" class="header-anchor">#</a> UI</h2> <p>在前端的设计风格上面，我们选择的是参照 Google 提出的 <a href="https://material.io/design/" target="_blank" rel="noopener noreferrer">Material Design<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进行设计，所以我们选择了 <code>VUE</code> + <code>MATERIAL DESIGN</code> 的组件库 <a href="https://vuetifyjs.com/zh-Hans/" target="_blank" rel="noopener noreferrer">vuetify<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来进行页面的书写。</p> <p>我们不选择使用任何 UI 模板，事实上也没有什么模板可以选择。从零到一全部由自己设计完成。具体过程可以参见项目的 <a href="https://github.com/GeneralAndKing/one-yard-ui/commits/master" target="_blank" rel="noopener noreferrer">commit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，其中包括多次代码重构和重写。</p> <p>我们提供两套主题：</p> <ul><li>明亮——以蓝白为基础</li> <li>暗黑——以红黑为基础</li></ul> <p>两套主题用户可以自由切换。同时，尽可能多的带来动感、过渡和手机端的友好体验。</p> <h3 id="兼容性"><a href="#兼容性" class="header-anchor">#</a> 兼容性</h3> <p>由于浏览器的多样性，我们没有办法去兼容所有的浏览器，且我们不是专业的前端工程师，所以难免有些浏览器不能所及，目前已测的浏览器如下：</p> <table><thead><tr><th>浏览器</th> <th>支持情况</th></tr></thead> <tbody><tr><td>Chromium (Chrome, Edge Insider)</td> <td>支持</td></tr> <tr><td>Firefox</td> <td>支持</td></tr> <tr><td>Edge</td> <td>支持</td></tr> <tr><td>Safari 10+</td> <td>支持</td></tr> <tr><td>IE11 / Safari 9</td> <td>不支持</td></tr> <tr><td>IE9 / IE10</td> <td>不支持</td></tr></tbody></table> <p>对于移动端，我们没有财力和精力去做完整的测试，但目前流行的机型而言没有发现有不支持的情况。</p> <h3 id="模板引擎与预处理语言"><a href="#模板引擎与预处理语言" class="header-anchor">#</a> 模板引擎与预处理语言</h3> <p>我们团队选择的模板引擎是 <code>PUG</code>， 预处理语言 <code>STYLUS</code>。这是我们团队认为是绝配的两个东西，他们的书写风格极为相似，且容易理解。更重要的是，省去了很多不必要的行数，比如 HTML 标签的关闭，比如 <code>CSS</code> 的大括号等。</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// PUG</span>
<span class="token selector">v-app#inspire</span>
  <span class="token func"><span class="token function">v-fade-transition</span><span class="token punctuation">(</span>hide-on-leave<span class="token punctuation">)</span></span>
    router-view
</code></pre></div><div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// STYLUS</span>
<span class="token selector">#form-card</span>
  <span class="token property-declaration"><span class="token property">width</span> <span class="token number">450</span>px</span>
  <span class="token atrule-declaration"><span class="token atrule">@media</span> <span class="token punctuation">(</span>max-width<span class="token punctuation">:</span> <span class="token number">450</span>px<span class="token punctuation">)</span></span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
    <span class="token property-declaration"><span class="token property">height</span> <span class="token number">100%</span></span>
    <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">2</span>rem <span class="token important">!important</span></span>
<span class="token selector">#form-footer</span>
  <span class="token property-declaration"><span class="token property">position</span> absolute</span>
  <span class="token property-declaration"><span class="token property">text-align</span> center</span>
  <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100%</span></span>
  <span class="token property-declaration"><span class="token property">background-color</span> <span class="token func"><span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>
  <span class="token property-declaration"><span class="token property">justify-content</span> center</span>
  <span class="token property-declaration"><span class="token property">left</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">display</span> flex</span>
  <span class="token property-declaration"><span class="token property">padding</span> <span class="token number">40</span>px <span class="token number">0</span> <span class="token number">0</span></span>
  <span class="token property-declaration"><span class="token property">font-size</span> <span class="token number">15</span>px</span>
  <span class="token atrule-declaration"><span class="token atrule">@media</span> <span class="token punctuation">(</span>max-width<span class="token punctuation">:</span> <span class="token number">450</span>px<span class="token punctuation">)</span></span>
    <span class="token property-declaration"><span class="token property">bottom</span> <span class="token number">0</span></span>
</code></pre></div><p>这里的模板引擎，不是前端端未分离时的，代码侵入性高，耦合度高的 <code>Jsp</code>、 <code>Freemarker</code> 之类的模板引擎。而是为了提高我们写代码的效率的利器。将我们写的模板转化为对应的 <code>HTML</code>，同时，我们引入 <code>stylus</code> 预处理语言，将层叠样式表变为了一门 “语言”。</p> <h2 id="js"><a href="#js" class="header-anchor">#</a> Js</h2> <p>工程化的到来，必定要消除 <code>javascript</code> 这种弱类型语言书写上的一些随意性，因而我们约定如下方式来帮助我们规范化我们的 <code>js</code> 代码：</p> <ol><li>使用了具有强行检查高严格 <code>eslint</code> 插件统一代码风格</li> <li>尽量避免 <code>JSX</code> 的使用</li> <li>以 <em>ECMAScript 8</em> 为核心规范进行代码书写</li> <li>引入  <em>Lodash</em> 工具库来提高代码书写效率</li></ol> <p>这几条约束让我们的 <code>JS</code> 代码更加合法易读。</p> <h2 id="封装"><a href="#封装" class="header-anchor">#</a> 封装</h2> <p>现在的前端，封装是极其重要的一项。这里的封装有两个概念，一方面是 JS 常用类库的封装，一方面是组件的封装。</p> <ul><li>对于一些常使用的组件，例如提示框，我们选择将它封装为一个 <code>vue</code> 插件，可以直接通过 <code>JS</code> 调用。</li> <li>对于一些需要同一处理的类库，例如 <code>axios</code> 请求，我们对他进行二次封装。</li> <li>对于一些需要复用的组件，我们也将他们进行封装，方便我们的直接引用。</li></ul> <blockquote><p>决赛中，我们更是注意对于组件的封装，每个组件各司其职，相比起复赛冗长的前端代码，决赛中的代码更能够体现组件化的思想。</p></blockquote> <h2 id="页面骨架"><a href="#页面骨架" class="header-anchor">#</a> 页面骨架</h2> <p>在系统应用中，当网速不够给力的时候，加载的页面是给人体验非常不好的，所以我们团队引入了 <strong>页面骨架</strong>。通过这个骨架，能够让用户知道现在正在加载数据，使得页面更加友好。</p> <p><img src="http://image.japoul.cn/docs/%E5%BD%95%E5%88%B6_2019_12_12_14_10_02_906.gif" alt=""></p> <h2 id="鉴权"><a href="#鉴权" class="header-anchor">#</a> 鉴权</h2> <p>和后端一样，前端也需要进行权限鉴定，以生成该用户所拥有的相应角色能够操作的菜单和功能。我们权限分为两个部分：</p> <ol><li>路由生成 —— 根据用户角色生成相应路由</li> <li>菜单生成 —— 根据路由结果生成相应菜单</li></ol> <p>两步都有严格的权限鉴定规则，通过请求保存后端的角色信息，然后将其进行匹配，最后得出他哪些能够访问，哪些能够操作。</p> <h2 id="移动端"><a href="#移动端" class="header-anchor">#</a> 移动端</h2> <p>我们为移动端做了很好的适配，例如登录页面：</p> <p><img src="http://image.japoul.cn/docs/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20191121020223.png" alt="login"></p> <p>在移动端：</p> <p><img src="http://image.japoul.cn/docs/Screenshot_20191121_015608_mark.via.jpg" alt="login"></p> <p>对于表格，在电脑端：</p> <p><img src="http://image.japoul.cn/docs/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20191121015534.png" alt="table"></p> <p>而在手机端：</p> <p><img src="http://image.japoul.cn/docs/Screenshot_20191121_015914_mark.via.jpg" alt="table"></p> <p>这样的布局很好的显示出表格的数据了</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/GeneralAndKing/one-yard-ui/edit/master/docs/architecture/web.md" target="_blank" rel="noopener noreferrer">帮助我们改进此文档！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2019/12/12 下午3:06:27</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/one-yard-ui/architecture/back.html" class="prev">后端</a></span> <span class="next"><a href="/one-yard-ui/architecture/summary.html">总结</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/one-yard-ui/assets/js/app.3393022b.js" defer></script><script src="/one-yard-ui/assets/js/2.04738c42.js" defer></script><script src="/one-yard-ui/assets/js/14.44ce8ad2.js" defer></script><script src="/one-yard-ui/assets/js/3.1b52fbe7.js" defer></script>
  </body>
</html>
