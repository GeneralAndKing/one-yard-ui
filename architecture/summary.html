<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总结 | 智能制造协同平台</title>
    <meta name="description" content="文档说明">
    <link rel="apple-touch-icon" href="/one-yard-ui/apple-touch-icon.png">
  <link rel="icon" href="/one-yard-ui/favicon-32x32.png">
  <link rel="manifest" href="/one-yard-ui/manifest.json">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/one-yard-ui/assets/css/0.styles.858f56bf.css" as="style"><link rel="preload" href="/one-yard-ui/assets/js/app.3393022b.js" as="script"><link rel="preload" href="/one-yard-ui/assets/js/2.04738c42.js" as="script"><link rel="preload" href="/one-yard-ui/assets/js/13.0aa78ebe.js" as="script"><link rel="preload" href="/one-yard-ui/assets/js/3.1b52fbe7.js" as="script"><link rel="prefetch" href="/one-yard-ui/assets/js/10.5f0e03c2.js"><link rel="prefetch" href="/one-yard-ui/assets/js/11.eacf953d.js"><link rel="prefetch" href="/one-yard-ui/assets/js/12.bedea048.js"><link rel="prefetch" href="/one-yard-ui/assets/js/14.44ce8ad2.js"><link rel="prefetch" href="/one-yard-ui/assets/js/15.db0d303b.js"><link rel="prefetch" href="/one-yard-ui/assets/js/16.0b53dac7.js"><link rel="prefetch" href="/one-yard-ui/assets/js/17.2afb900e.js"><link rel="prefetch" href="/one-yard-ui/assets/js/18.9ddb41a6.js"><link rel="prefetch" href="/one-yard-ui/assets/js/19.66d23c63.js"><link rel="prefetch" href="/one-yard-ui/assets/js/20.4eea7b7b.js"><link rel="prefetch" href="/one-yard-ui/assets/js/21.093b88ea.js"><link rel="prefetch" href="/one-yard-ui/assets/js/22.644f3eba.js"><link rel="prefetch" href="/one-yard-ui/assets/js/4.139c2291.js"><link rel="prefetch" href="/one-yard-ui/assets/js/5.faf28de6.js"><link rel="prefetch" href="/one-yard-ui/assets/js/6.85ee2228.js"><link rel="prefetch" href="/one-yard-ui/assets/js/7.d0cd05bd.js"><link rel="prefetch" href="/one-yard-ui/assets/js/8.a2a5c451.js"><link rel="prefetch" href="/one-yard-ui/assets/js/9.d656f4dc.js">
    <link rel="stylesheet" href="/one-yard-ui/assets/css/0.styles.858f56bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/one-yard-ui/" class="home-link router-link-active"><!----> <span class="site-name">智能制造协同平台</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/one-yard-ui/" class="nav-link">主页</a></div><div class="nav-item"><a href="/one-yard-ui/demand/" class="nav-link">操作手册</a></div><div class="nav-item"><a href="/one-yard-ui/architecture/" class="nav-link router-link-active">技术架构</a></div> <a href="https://github.com/GeneralAndKing/one-yard-ui" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/one-yard-ui/" class="nav-link">主页</a></div><div class="nav-item"><a href="/one-yard-ui/demand/" class="nav-link">操作手册</a></div><div class="nav-item"><a href="/one-yard-ui/architecture/" class="nav-link router-link-active">技术架构</a></div> <a href="https://github.com/GeneralAndKing/one-yard-ui" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/one-yard-ui/architecture/" class="sidebar-link">概览</a></li><li><a href="/one-yard-ui/architecture/maintain.html" class="sidebar-link">运维</a></li><li><a href="/one-yard-ui/architecture/back.html" class="sidebar-link">后端</a></li><li><a href="/one-yard-ui/architecture/web.html" class="sidebar-link">前端</a></li><li><a href="/one-yard-ui/architecture/summary.html" class="active sidebar-link">总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/summary.html#回顾" class="sidebar-link">回顾</a></li><li class="sidebar-sub-header"><a href="/one-yard-ui/architecture/summary.html#一些问题" class="sidebar-link">一些问题</a></li></ul></li><li><a href="/one-yard-ui/architecture/other.html" class="sidebar-link">附录：接口设计表格</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="回顾"><a href="#回顾" class="header-anchor">#</a> 回顾</h2> <p>这次比赛还是有不少收获的，虽然十分的累，花了很多时间，前后端项目加起来五六百个 <code>commit</code>。在后端花的时间，其实不及前端的五分之一，因为对于我们几个后端同学来说，写后端还是得心应手，但是前端的界面把控和一些细节实在让人头疼。总结下来有几点：</p> <ol><li>接口文档很重要</li> <li>抽象很重要</li> <li>组件化、工程化会带来质的飞跃</li> <li>前后端分离联调成本变高，但开发速度较快。</li> <li>团队之间配合决定了这个项目的进度</li> <li>尽可能的不要想太多，物极必反</li> <li>安全太重要</li> <li>网路不稳定带来的影响比想象中的大很多</li> <li><code>TDD</code> 真的太棒了</li> <li>......</li></ol> <h2 id="一些问题"><a href="#一些问题" class="header-anchor">#</a> 一些问题</h2> <p>在项目开发中遇到不少问题，记录一下。（这些问题都是通过队友之间互相问问题的方式阐述）</p> <blockquote><p>Q: 为啥不直接用 <code>spring-boot</code> 最新版，而是用 <code>2.1.9</code>？</p></blockquote> <p><s>最新版不一定是最好的，在使用的时候发现最新版的依赖管理中的 <code>Spring-security</code> 存在一些 bug，参见我队队员提的 <a href="https://github.com/spring-projects/spring-security-oauth/issues/1798" target="_blank" rel="noopener noreferrer">ISSUE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。虽然在随后的时间里，<code>Spring-security</code>将这个 bug 回滚了，但是在 <code>spring-boot</code> 的依赖管理中依旧没有变。所以我们退而求次，选择小版本号较低的 <code>2.1.9</code>。</s></p> <p>第二次版本迭代已经使用 <code>2.2.2</code> 最新版本。</p> <blockquote><p>Q: 为啥不用安全性更高的非对称加密啊？</p></blockquote> <p>因为没必要，还是上面总结的，物极必反。一个项目的诞生不可能全盘皆用最好，最完美的架构却不一定是最好的架构。适合当前项目的是最好的。目前只是一个小项目，没有必要强上非对称加密。就像没有必要强行拆分为资源服务器和授权服务器一样。如果以后有需要，迭代的时候加上即可。</p> <blockquote><p>Q: 为什么直接暴露 <code>Repository</code>？这样真的好吗？感觉不安全诶</p></blockquote> <p>好啊！我少写了好多好多接口啊！然后通过 <code>RBAC</code> 模型来控制下权限，简直不要太爽啊！而且 <code>Controller</code> 少了好多，方法也少写好多，如果是以前不暴露，这些重复的方法还要写在 <code>BaseController</code>、<code>BaseService</code> 里面。现在单表操作太爽太爽了！谁用谁知道！</p> <blockquote><p>Q: 为啥要用 Docker啊？两个环境有必要吗？</p></blockquote> <p>当然有！Docker 大法好！使用 Docker，一条命令就完成环境安装和部署，配合 docker-compose 编排方便太多了，在新的服务器上安装环境，五分钟搞定！简直是 Linux 的大亲儿子啊。而且想要清除环境、更换环境非常容易！这样对于环境的变化有了大大的容错性！</p> <blockquote><p>Q: 前端既然是短板，为啥不用模板呢？</p></blockquote> <p>一方面，用模板需要我们去熟悉模板的配置，熟悉模板的组件和写法，而且别人的模板不一定适合我们，也不一定是能够跟上相应的依赖更新的脚步的，我们没有那么多时间去熟悉，自己写的也许会有 bug ，但是毕竟是亲生的，怎么出 bug 自己心里有点数。另一方面，，，，别人写的审美与我们不一样啊，要不就是太花里胡哨，改起来费劲，要不就是太丑不想用。最后只有自食其力了。</p> <blockquote><p>Q: 咱们一直跟进时代，现在有了更好的接口设计——GraphQL，给他们说说咱们为啥放弃使用 GraphQL 而去使用 RestFul 吧。</p></blockquote> <p>好嘞～如果细心的朋友会就发现，我们后端项目还有一个分支：<a href="https://github.com/GeneralAndKing/one-yard/tree/graphql" target="_blank" rel="noopener noreferrer">GraphQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。这是我们小队一开始准备使用的接口规范，但是在实践中不断发现，这个技术难度较大，虽然他确实能够带来一些便利，让人眼前焕然一新，但是开发速度实在太慢，并且我们技术有限，在某些方面直接使用会发现有很多问题需要解决。于是我们在尝试了四天以后，放弃了使用 GraphQL，但是我们舍不得将它删除，所以将它放到另外一个分支之中去了。他能够满足我们的一些基本需求，但是光是后端就让我们折腾够呛，迫不得已，只有回归原始最熟悉的 REST 了。不过也没有遗憾，至少体验过了。</p> <p><em>（还有好多好多记录，想想也没必要全部都写在这儿）</em></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/GeneralAndKing/one-yard-ui/edit/master/docs/architecture/summary.md" target="_blank" rel="noopener noreferrer">帮助我们改进此文档！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2019/12/11 下午1:40:34</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/one-yard-ui/architecture/web.html" class="prev">前端</a></span> <span class="next"><a href="/one-yard-ui/architecture/other.html">附录：接口设计表格</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/one-yard-ui/assets/js/app.3393022b.js" defer></script><script src="/one-yard-ui/assets/js/2.04738c42.js" defer></script><script src="/one-yard-ui/assets/js/13.0aa78ebe.js" defer></script><script src="/one-yard-ui/assets/js/3.1b52fbe7.js" defer></script>
  </body>
</html>
